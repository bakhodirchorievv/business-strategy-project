import{r as i,j as a}from"./index-DeZAD-sV.js";import{N as M,A as P}from"./NavBar-DLvXqiIX.js";import{c as Q,o as V,C as X,d as r,g as Y,a as A,r as d,u as $,b as F,e as Z,f as u,h as _,s as m,i as N,j as p}from"./ClipLoader-UcJM2utI.js";const se=()=>{const[W,q]=i.useState([]),[h,b]=i.useState(""),[f,y]=i.useState(""),[D,I]=i.useState(""),[U,S]=i.useState(""),[g,R]=i.useState(null),[v,E]=i.useState(null),[x,L]=i.useState(null),C=i.useRef(null),j=i.useRef(null),k=Q(r,"TelevisionCards"),[w,o]=i.useState(!0),l=async()=>{o(!0);try{const t=(await Y(k)).docs.map(s=>({...s.data(),id:s.id}));q(t),o(!1)}catch(e){console.error(e),o(!1)}};i.useEffect(()=>{l();const e=V(A,t=>{R(t?t.email:null)});return()=>e()},[]);const B=async()=>{var e,t;if(v&&f&&h){o(!0);const s=`${Date.now()}-${v.name}`,n=d(m,`images/${s}`);await $(n,v);const c=await F(n);try{await Z(k,{title:h,desc:f,imageUrl:c,userId:(t=(e=A)==null?void 0:e.currentUser)==null?void 0:t.uid}),l(),b(""),y(""),E(null),C.current&&(C.current.value=""),o(!1)}catch(T){console.error(T),o(!1)}}else console.error("Something is not selected (image or title or desc)")},z=async(e,t)=>{try{const s=u(r,"TelevisionCards",e);if(await _(s),t){const n=d(m,t);try{await N(n),console.log("Image deleted successfully")}catch(c){console.error("Error deleting image: ",c)}}l(),console.log("TelevisionCard and image deleted")}catch(s){console.error("Error deleting TelevisionCard or image: ",s)}},O=async e=>{try{const t=u(r,"TelevisionCards",e);await p(t,{title:U}),l(),S(""),console.log("TelevisionCard updated")}catch(t){console.error("while updating title",t)}},G=async(e,t)=>{if(x)try{const s=`${Date.now()}-${x.name}`,n=d(m,`images/${s}`);await $(n,x);const c=await F(n),T=u(r,"TelevisionCards",e);if(t){const K=d(m,t);await N(K)}await p(T,{imageUrl:c}),l(),L(null),j.current&&(j.current.value=""),console.log("Image updated")}catch(s){console.error("Error updating image: ",s)}else console.error("No image selected for update")},H=async(e,t)=>{const s=d(m,t);try{await N(s);const n=u(r,"TelevisionCards",e);await p(n,{imageUrl:""}),l(),console.log("Image deleted")}catch(n){console.error("Error deleting image: ",n)}},J=async e=>{try{const t=u(r,"TelevisionCards",e);await p(t,{desc:D}),l(),I(""),console.log("TelevisionCard date updated")}catch(t){console.error("while updating release date",t)}};return a.jsxs("div",{className:"TelevisionCard-admin-wrapper",children:[g&&a.jsx(M,{}),a.jsxs("div",{className:"right-side-wrapper",children:[a.jsx(P,{}),g&&a.jsxs("div",{className:"controlAuthWrapper",children:[a.jsx("h2",{className:"addTelevisionCardTitle",children:"Add New Television Card"}),a.jsx("input",{className:"admin-input",type:"text",placeholder:"Television Card title...",value:h,onChange:e=>b(e.target.value)}),a.jsx("input",{className:"admin-input",type:"text",placeholder:"Television Card desc...",value:f,onChange:e=>y(e.target.value)}),a.jsx("input",{className:"admin-input",type:"file",ref:C,onChange:e=>E(e.target.files?e.target.files[0]:null)}),a.jsx("button",{className:"admin-btn",onClick:B,disabled:w,children:"Submit Television Card"})]}),g&&(w?a.jsx("div",{className:"loading-indicator",children:a.jsx(X,{size:50,color:"#eee",loading:w})}):a.jsx("div",{className:"controlDataWrapper",children:W.map(e=>a.jsx("div",{className:"TelevisionCardItemWrapperFire",children:g&&a.jsxs(a.Fragment,{children:[a.jsx("h1",{style:{color:"white"},children:e.title}),a.jsx("p",{children:e.desc}),e.imageUrl&&a.jsx("img",{className:"TelevisionCardImgFire",src:e.imageUrl,alt:e.title,width:"500"}),a.jsx("button",{className:"admin-btn",onClick:()=>z(e.id,e.imageUrl),children:"Delete Television Card"}),a.jsx("br",{}),a.jsx("input",{className:"admin-input",onChange:t=>S(t.target.value),type:"text",value:U,placeholder:"new title..."}),a.jsx("button",{className:"admin-btn",onClick:()=>O(e.id),children:"Update Title"}),a.jsx("br",{}),a.jsx("input",{className:"admin-input",type:"file",ref:j,onChange:t=>L(t.target.files?t.target.files[0]:null)}),a.jsx("button",{className:"admin-btn",onClick:()=>G(e.id,e.imageUrl),children:"Update Image"}),a.jsx("br",{}),a.jsx("button",{className:"admin-btn",onClick:()=>H(e.id,e.imageUrl),children:"Delete Image"}),a.jsx("br",{}),a.jsx("input",{className:"admin-input",type:"text",onChange:t=>I(t.target.value),value:D,placeholder:"new desc..."}),a.jsx("button",{className:"admin-btn",onClick:()=>J(e.id),children:"Update Desc"})]})},e.id))}))]})]})};export{se as default};
